% !TEX root =  ../master.tex
\chapter{Implementierung}
% \section{Backend}
% \subsection{Firebase}
% \subsection{Datenhaltung}



% \section{Frontend}
% \section{Tools}
% \section{Datenauswertung für Dozenten}



\section{Allgemeine Implementierungsdetails}



\section{Responsive Design} % NF3
Nach den nicht-funktionalen Anforderungen ist ein responsive Design pflicht.  
Bei der Entwicklung wurde auf die responsive Darstellung geachtet.
So verhalten sich alle Funktionalitäten einer Anwendung wie es von einer nativen Anwendung erwartet wird.
Dies macht sich besonders in der optimierten Darstellung bemerkbar, bei der der Nutzer nicht zu scrollen oder zoomen verpflichtet ist bemerkbar.
Aber auch andere Funktionalitäten, wie das Wischen der Karteikarten funktioniert auf Geräten mit einem Touchscreen genauso, wie auf Geräten, welche eine Maus verwenden.


% TODO: Vielleicht eher UX schreiben und dann alles sagen, wie z.B. Kontrast, ...




\section{Zugangskontrolle}
Nach der Anforderungen müssen zwei Rollen unterschieden werden: Studenten und Dozenten.
Die Zugangskontrolle findet an mehrere Komponenten statt: Eine Zugangskontrolle auf Serverseite und eine Navigationskontrolle innerhalb des Nutzerinterfaces.


\subsubsection*{Serverside}
Eine Serverseitige Zugangskontrolle ist notwendig, da Nutzer das Nutzerinterface und den Netzwerkverkehr manipulieren kann und dadurch Zugang bekommen könnten.
Aus diesem Grund werden sämtliche Serveranfragen validiert.
Dafür sind auf dem Server Regeln hinterlegt, die die Authorität des Nutzers überprüfen.
Die Regeln werden bei jeder Anfrage vor der Bearbeitung dieser überprüft.

\begin{lstlisting}[caption={Einfaches Beispiel der Serverside Regeln}, label=lst:firestoreRules]
rules_version = '2';
service cloud.firestore {
    match /databases/{database}/documents {
        function getRole(role) {
            return get(/databases/$(database)/documents/users/$(request.auth.uid)).data.roles[role]
        }
        match /{document=**} {
            allow read:  if request.auth != null;
            allow write: if getRole('dozent')
        }
    }
}\end{lstlisting}


\subsubsection*{Userside}
Auf der Nutzerseite existiert eine Zugangskontrolle, die verhindert, dass Nutzer Interfacezustände hervorrufen kann, für die er nicht authorisiert ist.
Ein Beispiel hierfür ist die Navigation auf eine Maske, für deren Daten er Serverseitig nicht berechtigt ist.
In diesem Fall würde der Nutzer Fehlermeldungen und eine schlechte User Experience erleben.
Im Nutzerinterface ist dafür ein \enquote{Router-Guard} implementiert.
Dieser Guard überprüft bei jedem Navigationsversuch, ob der Nutzer für die Zielroute berechtigt ist.
Nur wenn der Nutzer die notwendigen Berechtigungen besitzt, wird die Navigation fortgesetzt.
Nutzer ohne die notwendigen Berechtigungen werden automatisch auf das Dashboard bzw. die Login-Maske geleitet.




% TODO: Die haben auch noch den ganzen Lebenszyklus von React erklärt wtf=
% TODO: Wir sollten vielleicht was zum Thema accessibility schreiben (unterschiedliche Sprachen, Design, etc.)





\section{Übersetzung}
% TODO: Das in Anforderungen
% TODO: Konzeption

An der DHBW studieren viele verschiedene Studenten mit verschiedenen Hintergründen.
Nicht immer ist Deutsch die Muttersprache.
Besonders für Studenten des Erasmus+ Programms ist Englisch oft präferiert.

Aus diesem Grund ist die Anwendung sowohl in Deutsch, als auch in Englisch verfügbar.
Neue Sprachen können mithilfe einfach mithilfe von JSON-Dateien hinzugefügt werden.
Verfügbare Sprachen werden in der Navigation im Globus-Menu angezeigt.
Durch Klick auf eine Sprache wird sofort die gesamte Anwendung übersetzt, ohne das neu geladen werden muss.

Die Anwendung fragt beim initialen Aufruf der Anwendung ab, auf welche Sprache das Gerät des Nutzers eingestellt ist.
Wird eine kompatible Sprache gefunden wird die Anwendung auf diese übersetzt.
Andernfalls wird Englisch als internationale Sprache gewählt.
